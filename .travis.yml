language: python
python:
- '3.6'
install:
- pip install ansible==2.7.9 molecule apache-libcloud
script:
- molecule --debug test
after_script:
- molecule --debug destroy
env:
  global:
  - secure: L3a8qMB8MWfecWJa7ESpRKKl6OamX3l+z+lw8Kg+fp39kSLxEv2x/1iZzVa+773c6TOxqLPE38Li3tjqJdV2wu6C3VTfblqEvM59PX5wkr+7wHrjSQ9BREnH3Rx/a9LNZNQTSVMp1xRzbOptDEh3tA6UhYTIUjxl2X1W//7OywdAQYxO/4wuy/ug596/Lbt/QRDnpJ7AOsuUgaHHrP92eZBQBpTmyZ7s9v3TDk+TXoZudBHM8LvrKxI0dScuEij8JtdzdmO5BK/xR4sTEbcaklQMxOhVGI63X20WvlrKPhFIeaIZESRWNGt+FXHmASNrEj9Rw1Rz/RbOYMRknrSln6j2YEeBEZMsS/96+GnUiHEuvpEGugCjJmhyc4jkf+TU5frlKSgD+vdcG9i/ZoyC1qFvuP4yOI2YnqpRjdUPWLhZt80OfsJt5W/sUfXppz/LEEpdakZWjR9B/0b8nPQRvbLmuYngzM0NMPW6T6AZpkLKxVLw8eJJCvWyVBMdtqqY9pCmUKO3sLrs292YOQu3mLobtav0sNjUlpcsGBp2C+s3QwIAvTD59dfrFmWLyN3rxs8bzUsogPzFkzFfaI6cWvr71RfubyVtNf+4FoV06CHkJrgLCSsA/xCBo+V8jGxL1Jq2b7mk4Jy6Wbjcsy60rgglRTPZXN2DOt+F/UCgI04=
  - secure: t7uz139+Bg9Jlt0SU/2+WAhKMuMXIOh6kwF9Ju/4c+mg0BXMaL72q2uo2JwmPVsl3cj707TpMFGOhti2orAwCoWwYcm7TAXxMhObmowepTjPFlmdduNY5iaHGNUjb1yaomiYUQGnloNBMczEQNOLIqIjVGPqaVgd0RqVMtWKlylEWlloICdmyNaRk6IRjKRGUeATls783F+ZciIIi3BD5E/2QJexJSNPh7SJW9bdZJzofXf+oD6bRvn1V5u2R+P8FajG86kjVjfZDzigdX6VrN5eQiK86015nSWJHCj2DnLQ26xvU21iSknQgIx9rhBMLQWN85b94xKmacBYW1mu7le4i0fUQj7ccEzjNZmh/wSe/51HW3koVJt6wQi+znZ4BXQ7wGVU5iH8uUxJWekzd7rFu4mne3kocx8vgyTlt4nWGG9loO4rUJnSufVyRxrHVHe3xHBnlTHBo1g8VScbuTPCVbbowpUDNTNNQHcYUQNNlL1rnnUJ1R1/bOtTmm0PGfdm+V8Li7wArdsM6pVzfaAFFlXAyHCMwi3inz5HNKEMKetDumfwN4KoLf/P6L7iCtWG42XzKQIjK82ZmZSqVoXoBRMHmTlgiBCxAYqURWML4T0HUQBsR3DztD6gvcfX8M24xry6zU7hu486NZRt/nZUIlKx9WYGSejd1iv9eAc=
  - secure: mRf03A1hkMc3FUwAUd7xmeJtQ+rcKFqQlUVY/K1DWEnpTi+GpIfO2nhFTF3QpGxBhUdwMYGHhizoUHiKxbqZWeAznRdPBmsDe6H0+SOQ1zqwb9uav5OvOjPLwZip1LDSaKl11pp33zisF+0hPoh3PZPD9vJ56RQ+L8coBFvXElJQcLl/+vZ/kdDmftcSgs/Gh9+UgkbPOQNlgFFQu9L9wh7Mx3KAdIAOemFHBvmnlBtNCmZhfN11qqz7FA/VjyrlX3FyUxQdOie8dBdJ0IhAmK7m097rL+2noUCFKEkm28ivIRpGlOHvFHafy/j5VoZhGq8FocEG7FyxmX38zbcc4Wpa8cqlhRFiu+ghPxk+rq1o4JbtyXWCTZUAhLM5US2s+ocJfahhoWAlZcadbe7wQbliBYyC6fsagiH+0GJA5Z7J2ijMKmUvRgkIA625WVSI802MwYX2eYYKrZfmNQeZCNa/YBnnJs/uOlrllLTVVcOwiyxrQjebKZlfgraVtxyC+J7cMCCUPDQAmeY4r0AvnUYSE1tqVxxLeAsEjZ2nCuBQ1Dp6qHvyf8kPZBAzpzwRYrS/FtyqGeJQFyXculaSEdsZO+MLOJX0M3Ep6pGeax6HzVj/fR7rCtAQwnmOJ5Ne2I707GQC05AKTulbcoweKl6tavHEYm6gwqGGLFG3APE=
  - secure: mPpkgt7p2CDqiFUcGNySMZT9IB5+m6+BDGRvDMFAFNcj7dQV+nOIA/ZOSEoQuU74qtmvW0wGFjC7koRCW2yuauJo6JsD2iWDOQ9/XDFwvRr84u6voyyQ+fbz+zPeuaTpYo0vHW6Ppxl1B3Y0GXFzpWW2Ib87pziI1qyAhmznjiuI5SpxWXnRnEmnPWWzKaoJonArbike6VgufEDGxL1Zvj7I9xa4hNWQid5BEkaHLXltRU7nFsZuCu5ORimyz40no2Y7YimGKV4WeufwhQLnZXQyLepvSUB8VeX5mUapGGVvS2hFQn0kFt7ZoFkjzcWp7LTPLkLj9XW8YeuK5qjmvEZCFGYQCFCDiFvMy0AMojC3mJ2z+HV2runjAlNb3grNpyHk4M7WC7vyB6Kj81MRU6/+XOJG7iSsEtWVOMbptgczv+8tTFWrGpm/iLoIZj7RvuvSUPj4AC+jM45DpXwquAmkBGNIKiDwQAjUeGG50RvNHrP99G8ieieaKO2EH6BxAneDKXJgG/m0VEG+UdoKdIQl9xgPn8g8WqEZn9XRmNN/s2nCb9mvR7ce83rVcRwrYsLVNKllZ9+JoYHs9yYjMRZZay9MLEpIeACx38JwXLtiuEoI/P2O2F0AAZfsEJ9dYbMiUc7CXlTfJiqvUhiT4v21fK8dV1Uh0JfM7OyxEbA=
  - secure: o/g61bAgQ3oGTGgMCb2w/rJIftVyxyiR+yQHkZwHRTbCN7pyG7C3oAlIHGeMKpHYiofmmlKZySdt19TMbtusVr7kwb5Xd60n5z2fsS/FuXR7gVxVtpVU+P4pSlcCtULYtOTHil6ZpgkFh/3rfKKWSu7bdZtCV6WczRwE02WsopT/aOjmKMTjRcPrElID0PMyEf+MsEWOgGOQ/18QDpFIMr+c62Jh3ChbOfP5rYhSCxX2tulT8OPRKR+sg24Xfe93rbZy6feucMJM8d+obvNzZ+BI1fqq/pugg5x/IZXiy6TqQTpVAL5DpQePzWv8jWHTo95vZwlCuIAPb+RgJjuwkxwpFJrx0VRXO06RkCqjwkIzDn2DRV+MWCiNjp66cWyUGc6A02niFcKTxsYVguGeFfQdeRRYIXB+w6IZ2Dt6YoZZAj8S1zY1B2GrCHFMFMrnQy1XSDyapNU0SwnZyuXb3uSojrusSeGmH8DfX1yzVLu5ngFS1gvmRfZ0YBnbvAn64/CP7AwR+Rbb6ovq+3smXZwwmsbedIX0REP9VMeQnKF6viNi3cM/LATkeGV/ZDSGHwc6UbxLfkHb0F+6mMee/O1wcNFTBMtZgdhKZvA9oazwqN0lHF+lCrANogw31ALr29C3VQ5lznIL/DtntK3Z2sdLvdIvE0kw5fdX2R+8veE=
  - secure: GD3SaOPdGU2ucLT7yHNqXamFlhcO1l5Dqnd0nxT8w6TgMJLxSMDjd1pzPE81H7oVRWBbRVfBX8+0gt3AeBu/GP2Tb2WaghMlnV96QftC/msc0QBi+c1wLOAPKH47Kqaz77j+CcadQ27Nlag+SrSXrQkep1WpAsM95awqsyL4jN1qEUbvzEdawhZuPMkI/YpkFgmDdoEZzRYKN0DRXBs0NM1ogF11drzgypD2Omzq1CWR75ftpTfY/eqt7xUFwZuVFlFVu4P6FVLM6JzOlWZM2HWJhsN9tmsTtw2yXOQaQuWl2fjUCL5FnQWrYVTNnmIsQazr8nHh/hnz64joNX4s+BFBfueeaNGSE6auVe9rn0BcC565FF6El1axrsrw6BXOQ3kd2yM3U/7Zurnw1Nd5Kvo+8rVHySRj4e6BF8PQZP3xGkqn3VIgnggys5kUiVxHKVOzQacV9D2lmYkNAOymhX42gk9pUvyTb/ZRjbtnYsbGkiUbzzxjrAq6TNQKJP4/3qrPuyktKmCnf+0KtBytOvQBMNsrk+7hMrrY8zOoj6r0uby7PM0PFV1Y90FYyr2y7ZEyJIZZL757TA+dqwtZNwvr5HO90th6DzYv4ogLzyl1J6ZTrsU0ADK3WC7c6uh21xbjyfHWGBnw2uxKYKJQiHzVt/RyIYz0NNwuwflFtsw=
before_install:
- openssl aes-256-cbc -K $encrypted_111cffa1dd2d_key -iv $encrypted_111cffa1dd2d_iv
  -in secrets.tar.enc -out secrets.tar -d

notifications:
  slack: nonamed-hq:oNSDgpO1cSanENRp1cXPmINc
